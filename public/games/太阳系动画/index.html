<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html" charset="utf-8">
        <title>太阳系动画</title>
        <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
        <!-- <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script> -->
    </head>
    <body>
       <canvas id="canvas" width="300" height="300"></canvas>
       <script>
           var sum = new Image();
           var moon = new Image();
           var earth = new Image();
           function init() {
               sum.src = 'https://mdn.mozillademos.org/files/1456/Canvas_sun.png';
               earth.src = 'https://mdn.mozillademos.org/files/1429/Canvas_earth.png';
               moon.src = 'https://mdn.mozillademos.org/files/1443/Canvas_moon.png';
               window.requestAnimationFrame(draw);
           }
           function draw() {
               var ctx = document.getElementById('canvas').getContext('2d');
               ctx.globalCompositeOperation = 'destination-over';
               ctx.clearRect(0,0,300,300);
               ctx.fillStyle = 'rgb(0,0,0,0.4)';
               ctx.strokeStyle = 'rgb(0,0,0,0.4)';
               ctx.save();
               ctx.translate(150,150);

               var time = new Date();
               ctx.rotate(((2*Math.PI)/60)*time.getSeconds()+((2*Math.PI)/60000)*time.getMilliseconds());
               ctx.translate(105,0);
               ctx.fillRect(0,-12,50,24);
               ctx.drawImage(earth,-12,-12);
               ctx.save();
               ctx.rotate(((2*Math.PI)/6)*time.getSeconds()+((2*Math.PI)/6000)*time.getMilliseconds());
               ctx.translate(0,28,5);
               ctx.drawImage(moon,-3.5,-3.5);
               ctx.restore();

               ctx.restore();
               ctx.arc(150,150,105,0,Math.PI*2,false);
               ctx.stroke();
               ctx.drawImage(sum,0,0,300,300);
               window.requestAnimationFrame(draw);
           }
           init();
       </script>
    </body>
</html>